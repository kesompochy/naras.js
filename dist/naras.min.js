!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define("NARAS",[],e):"object"==typeof exports?exports.NARAS=e():t.NARAS=e()}(self,(function(){return(()=>{"use strict";var t={607:function(t,e,i){var o=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.SoundMaster=e.Sound=void 0;var n=o(i(761));e.Sound=n.default;var r=o(i(859));e.SoundMaster=r.default},447:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t){this.resources=new Map,this.tasks=[],this._loadThen=function(){},this._cxt=t}return t.prototype.add=function(t,e){var i=this._promiseLoadingSound(t,e);return this.tasks.push(i),this},t.prototype.loadAll=function(){var t=this;Promise.all(this.tasks).then((function(){t._loadThen()}))},t.prototype.loadThen=function(t){this._loadThen=t},t.prototype._promiseLoadingSound=function(t,e){var i=this;return new Promise((function(o){fetch(e).then((function(t){return t.arrayBuffer()})).then((function(t){return i._cxt.decodeAudioData(t)})).then((function(e){i.resources.set(t,e),o(e)}))}))},t.prototype.get=function(t){return this.resources.get(t)},t}();e.default=i},859:function(t,e,i){var o=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var n=o(i(447)),r=window.AudioContext||window.webkitAudioContext,s=function(){function t(){this.cxt=new r,this._masterGain=this.cxt.createGain(),this._unlockEvents=["click","scroll","touchstart"],this.children=[],this.loader=new n.default(this.cxt),this._masterGain.connect(this.cxt.destination);for(var t=0,e=this._unlockEvents.length;t<e;t++)document.addEventListener(this._unlockEvents[t],this._initContext.bind(this),{once:!0});this._initContext()}return t.prototype._initContext=function(){"suspended"===this.cxt.state&&this.cxt.resume();for(var t=0,e=this._unlockEvents.length;t<e;t++)document.removeEventListener(this._unlockEvents[t],this._initContext.bind(this))},t.prototype.addSound=function(t,e){return this.loader.add(t,e),this},t.prototype.loadAll=function(){this.loader.loadAll()},t.prototype.addChild=function(t){this.children.push(t),t.acquireContext(this.cxt)},t}();e.default=s},761:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t,e){this._playing=!1,this._duration=0,this._startedTime=0,this._playedTime=0,this._loop=!1,this._volume=1,this._buffer=t,this._duration=t.duration,this.loop=(null==e?void 0:e.loop)||!1,this.volume=(null==e?void 0:e.volume)||1}return Object.defineProperty(t.prototype,"buffer",{set:function(t){this._buffer=t,this._duration=t.duration},enumerable:!1,configurable:!0}),t.prototype.acquireContext=function(t){this._cxt=t,this._gainNode=t.createGain(),this._gainNode.connect(t.destination)},t.prototype.reStart=function(){this._play(this._playedTime)},t.prototype.start=function(){this._play(0)},t.prototype._play=function(t){if(void 0===t&&(t=0),this._cxt&&this._buffer&&this._gainNode){var e=this._cxt;this._sourceNode=e.createBufferSource(),this._sourceNode.buffer=this._buffer;var i=this._sourceNode;i.connect(this._gainNode),i.start(0,t),this._sourceNode=i,this._startedTime=e.currentTime,this._playing=!0,this.loop||(this._endTimer=setTimeout(this._endThen.bind(this),1e3*this._duration))}},t.prototype.stop=function(){this._playing&&this._sourceNode&&(this._sourceNode.stop(0),this._endThen())},t.prototype.pause=function(){this._playing&&(this._playedTime=(this._playedTime+this._cxt.currentTime-this._startedTime)%this._duration,this._playing=!1,this._sourceNode.stop(0),this._clearTimer())},t.prototype._clearTimer=function(){clearTimeout(this._endTimer)},t.prototype._endThen=function(){this._playing=!1,this._playedTime=0,this._sourceNode.disconnect(0)},Object.defineProperty(t.prototype,"playing",{get:function(){return this._playing},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"loop",{get:function(){return this._loop},set:function(t){this._loop=t,this._sourceNode&&(this._sourceNode.loop=t)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"volume",{get:function(){return this._volume},set:function(t){this._volume=t,this._gainNode&&(this._gainNode.gain.value=t)},enumerable:!1,configurable:!0}),t}();e.default=i}},e={};return function i(o){var n=e[o];if(void 0!==n)return n.exports;var r=e[o]={exports:{}};return t[o].call(r.exports,r,r.exports,i),r.exports}(607)})()}));